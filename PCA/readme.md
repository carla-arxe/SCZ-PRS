## `PCA` – Principal Component Analysis Preparation

This folder contains scripts to perform participant filtering and principal component analysis (PCA), necessary for population stratification correction in downstream PRS analyses.

These scripts are located at:

users/genomics/arxe/SCZ/PCA

### Scripts

- **`0.filter_participants.sh`**  
  Filters out individuals who withdrew consent.

- **`0.filter_participants_v2.sh`**  
  Filters participants based on European ancestry using the UK Biobank field 22006, with the `euro_keep.txt` list; also applies the consent filter.

- **`1.filter_compare.sh`**  
  Compares the results of filtering from the scripts above, verifying consistency.

- **`2.pruning_pca.sh`**  
  Performs SNP pruning using PLINK on the unfiltered and unimputed BED files — considered the *old* version.

- **`2.pruning_pca_v2.sh`**  
  Updated version of the pruning script using the sample filtered to Europeans (`0.filter_participants_v2.sh` output).

- **`2.pruningcompare.sh`**  
  Compares pruning outputs from both versions and the individuals used for the pca generated by (Eva).

- **`3.pca.sh`**  
  Calculates principal components (PCs) using PLINK on the unfiltered dataset — *old* version.

- **`3.pca_v2.sh`**  
  Updated version of PCA calculation using the filtered European sample.

### Additional Files

This folder also contains:

- **Input files**: such as raw BED/BIM/FAM files from UK Biobank, population reference lists (`euro_keep.txt`), and field-specific filter lists.
- **Output files**: resulting PC scores, pruned datasets, logs.
- **Slurm job files**: used to submit jobs to HPC clusters for each step.
  
### Notes

- Input and output files, as well as SLURM submission scripts, are also stored here.
- PCA outputs (`*.eigenvec`, `*.eigenval`) are used in PRS correction downstream.

